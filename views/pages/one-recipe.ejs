<!DOCTYPE html>
<html lang="en">
  <%- include('../layout/head') %>
  <body>
    <%- include('../layout/header') %>
    <main>
      <%- include('../layout/nav') %>
      <section id="hero">
        <h2> Search Results</h2>
        <ul>
          <% recipes.forEach(recipe => { %>  
            <li class="cards">
              <%- include('../layout/card', {recipe: recipe}) %>

              <ul class="ingredients hide <%= recipe.identifier %>">
                <% recipe.ingredientsArray.forEach( ingredient =>{ %>
                  <li class="ingredient-li"><%= ingredient %></li>
                <% }); %>
              </ul>

              <ul class="nutrients hide <%= recipe.identifier %>">
                <li>Total Fat: <%= recipe.total_fat %>g</li>
                <li>Saturated Fat: <%= recipe.saturated_fat %>g</li>
                <li>Total Carbs: <%= recipe.total_carbohydrate %>g</li>
                <li>Dietary Fiber: <%= recipe.dietary_fiber %>g</li>
                <li>Sugars: <%= recipe.sugars %>g</li>
                <li>Protein: <%= recipe.protein %>g</li>
                <li>Cholesterol: <%= recipe.cholesterol %>mg</li>
                <li>Sodium: <%= recipe.sodium %>mg</li>
                <li>Potassium: <%= recipe.potassium %>mg</li>
              </ul>
              <button class="details-button" data-recipe_name="<%= recipe.identifier %>">Show Details</button>
              <form method="post" action="/recipe/<%= recipe.id %>" class="hide <%= recipe.identifier %>">
                <input type="hidden" name="_method" value="delete">
                <button type="submit">Delete</button>
              </form>
              <form method="post" action="/substitutions" class="hide <%= recipe.identifier %>">
                <input type="hidden" name="_method" value="put">
                <input type="hidden" name="recipe_id" value="<%= recipe.id %>">
                <input type="text" name="query">
                <input type="radio" name="addition" value="true"> Add
                <input type="radio" name="addition" value="false"> Remove
                <button type="submit">Save Substitution</button>
              </form>
            </li>
          <% }); %>
        </ul>
      </section>
      <aside class="right">
        <p>Right aside.</p>
        <%# include('../layout/ads') %>
      </aside>
    </main>
    <%- include('../layout/footer') %>
  </body>
</html>